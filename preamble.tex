% Include other pdf
\usepackage{pdfpages}
% \usepackage{navigator} % To mofidy the outline https://osl.ugr.es/CTAN/macros/generic/navigator/navigator-doc.pdf

% Include the indices of tables and figures
% https://tex.stackexchange.com/a/48512/178206
\usepackage{tocbibind}

% To add figure after the environment not later at the end of the section
% From https://stackoverflow.com/a/33801326/2886003
\usepackage{float}
\usepackage{colortbl}
\let\origfigure\figure
\let\endorigfigure\endfigure
\renewenvironment{figure}[1][2] {
    \expandafter\origfigure\expandafter[!ht]
} {
    \endorigfigure
}

% Page number the same even for first page of chapter
\usepackage[automark,headsepline]{scrlayer-scrpage}% sets page style scrheadings automatically
\clearpairofpagestyles
\ihead{\leftmark}
\ohead*{\pagemark}
\setkomafont{pagenumber}{}% default is \normalfont\normalcolor


% Reduce space between chapter title and top of page
% https://tex.stackexchange.com/a/63393/178206
\usepackage{titlesec}
\titleformat{\chapter}[display]
{\normalfont\huge\bfseries}{\null\hfill \chaptertitlename\ \thechapter}{20pt}{\Huge}
\titlespacing*{\chapter}{0pt}{-50pt}{40pt}

% To handle captions and make them wide even if tables are not
% https://stackoverflow.com/a/46101575/2886003
\usepackage{caption}
% Set in bold the numbering of tables and chapters
\captionsetup{labelfont=bf,width=\textwidth}
% Set table caption below tables, from example code on: https://tex.stackexchange.com/a/508243/178206
% But it doesn't work per design on kable https://github.com/yihui/knitr/issues/1189
% \captionsetup{labelfont=bf,width=\textwidth,positon=below}

% To be able to set table on the center and not overlap much on the right margin
\usepackage{adjustbox}

% Allow figures and tables in a page from https://bookdown.org/yihui/rmarkdown-cookbook/figure-placement.html#adjust-latex-placement-rules
\renewcommand{\topfraction}{.85}
\renewcommand{\bottomfraction}{.7}
\renewcommand{\textfraction}{.15}
\renewcommand{\floatpagefraction}{.66}
\setcounter{topnumber}{3}
\setcounter{bottomnumber}{3}
\setcounter{totalnumber}{4}

% Creating marker on the page margins
% https://tex.stackexchange.com/questions/113323/how-can-one-put-a-marker-to-every-page-in-a-chapter

% \usepackage[a4paper,margin=15mm]{geometry}
% \usepackage{background}
% \usetikzlibrary{calc}
% \usepackage{xifthen}
% \usepackage{totcount}
% \usepackage{lipsum}
% \usepackage{zref}
% \regtotcounter{chapter}

% \backgroundsetup{
% contents={
%         \begin{tikzpicture}[overlay]
%             \pgfmathtruncatemacro{\mytotalchapters}{\totvalue{chapter} > 0 ? \totvalue{chapter} : 20}
%             \pgfmathsetmacro{\mypaperheight}{\paperheight/28.453}
%             \pgfmathsetmacro{\mytop}{-(\thechapter-1)/\mytotalchapters*\mypaperheight}
%             \pgfmathsetmacro{\mybottom}{-\thechapter/\mytotalchapters*\mypaperheight}
%             \ifcase \thechapter
%                 \xdef \mycolor{white}
%                 \or \xdef \mycolor{red}
%                 \or \xdef \mycolor{orange}
%                 \or \xdef \mycolor{yellow}
%                 \or \xdef \mycolor{green}
%                 \or \xdef \mycolor{blue}
%                 \or \xdef \mycolor{violet}
%                 \else \xdef \mycolor{black}
%             \fi
%             \ifthenelse{\isodd{\value{page}}}
%             {\fill[\mycolor] ($(current page.north east)+(0,\mytop)$) rectangle ($(current page.north east)+(-0.5,\mybottom)$);}
%             {\fill[\mycolor] ($(current page.north west)+(0,\mytop)$) rectangle ($(current page.north west)+(0.5,\mybottom)$);}
%         \end{tikzpicture}
%     },
%     scale=1,
%     angle=0
% }
